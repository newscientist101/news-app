{{define "content"}}
<h1>Create New Job</h1>

<form id="jobForm" class="form">
    <div class="form-group">
        <label for="name">Job Name *</label>
        <input type="text" id="name" name="name" required placeholder="e.g., Tech News Daily">
    </div>
    
    <div class="form-group">
        <label for="prompt">Prompt *</label>
        <textarea id="prompt" name="prompt" rows="4" required placeholder="e.g., Find the latest news about artificial intelligence and machine learning"></textarea>
    </div>
    
    <div class="form-group">
        <label for="keywords">Keywords (comma-separated)</label>
        <input type="text" id="keywords" name="keywords" placeholder="e.g., AI, machine learning, GPT">
    </div>
    
    <div class="form-group">
        <label for="sources">Preferred Sources (comma-separated)</label>
        <input type="text" id="sources" name="sources" placeholder="e.g., TechCrunch, Wired, Ars Technica">
    </div>
    
    <div class="form-group">
        <label for="region">Geographic Region</label>
        <input type="text" id="region" name="region" placeholder="e.g., United States, Europe, Asia">
    </div>
    
    <div class="form-group">
        <label for="frequency">Frequency</label>
        <select id="frequency" name="frequency">
            <option value="hourly">Hourly</option>
            <option value="6hours">Every 6 Hours</option>
            <option value="daily" selected>Daily</option>
            <option value="weekly">Weekly</option>
        </select>
    </div>
    
    <div class="form-group">
        <label class="checkbox-label">
            <input type="checkbox" id="isOneTime" name="isOneTime">
            One-time job (run immediately, don't repeat)
        </label>
    </div>
    
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Create Job</button>
        <a href="/jobs" class="btn">Cancel</a>
    </div>
</form>

<script>
document.getElementById('jobForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const form = e.target;
    const jobName = form.name.value;
    submitJobForm(form, 'POST', '/api/jobs', function() {
        window.location.href = '/?created=' + encodeURIComponent(jobName);
    });
});

document.getElementById('isOneTime').addEventListener('change', function(e) {
    document.getElementById('frequency').disabled = e.target.checked;
});
</script>
{{end}}
